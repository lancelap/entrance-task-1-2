# Задание 1 — найди ошибки

В этом репозитории находятся материалы тестового задания "Найди ошибки" для [14-й Школы разработки интерфейсов](https://academy.yandex.ru/events/frontend/shri_msk-2018-2) (осень 2018, Москва, Санкт-Петербург, Симферополь).

Для работы тестового приложения нужен Node.JS v9. В проекте используются [Yandex Maps API](https://tech.yandex.ru/maps/doc/jsapi/2.1/quick-start/index-docpage/) и [ChartJS](http://www.chartjs.org).

## Задание

Код содержит ошибки разной степени критичности. Некоторые из них — стилистические, а другие — даже не позволят вам запустить приложение. Вам нужно найти все ошибки и исправить их.

Пункты для самопроверки:

1. Приложение должно успешно запускаться.
1. По адресу http://localhost:9000 должна открываться карта с метками.
1. Должна правильно работать вся функциональность, перечисленная в условиях задания.
1. Не должно быть лишнего кода.
1. Все должно быть в едином codestyle.

## Запуск

```
npm i
npm start
```

При каждом запуске тестовые данные генерируются заново случайным образом.

## Решение

Запускаем приложение. Видим предупреждение

```
WARNING in ./src/index.js 4:2-9

"export 'default' (imported as 'initMap') was not found in './map'

 @ multi (webpack)-dev-server/client?http://localhost:9000 ./src/index.js
```

Идем в `./src/index.js`. Вроде все правельно идем в `./map.js` и видим, что просто экспортируем функцию `initMap` нам надо добавить ключевое слово `default` после экспорта, либо импортить функцию `initMap` в `index.js` через фигурные скобки. Я добавил ключевое слово  `default`.

Все запускается без ошибок. Но на `http://localhost:9000` пусто, нет никакой карты. 
Карта имеет высоту в `0px`. Зададим в `index.css` высоту для элемента `#map` в `100vh`. Наша карта появилась.

Хорошо. У нас есть карта, но нет на ней меток. Идем дальше. 

Добавляем геообъект на карту в `./map.js`.

Нашел наши точки в Иране. Что-то наверное не так.

Начал смотреть, на данные которые мы получаем. 

Нашел что в `mappers.js` координатах используется последовательность «долгота, широта». 
Изменил на «широта, долгота». 

Теперь мы видим наши точки в Москве.

При попытке нажать на элемент на карте появляется ошибка `Uncaught TypeError: Cannot read property 'destroy' of null`.

В `details.js` изменил arrow function на обычныне в методах. Чтобы this был корректным.

Теперь контент на метках работает, но некорректно обображаются графики. 

В `chart.js` Удалили наибольшее значение для оси `y`. По умолчанию будет браться максимальное значение из данных.

Осталось только сделать, чтобы если неисправный объект входит в кластер, то иконка кластера должна показывать, что в нем есть неисправная станция.

Удалил установку диаграммы для значка кластера `objectManager.clusters.options.set('preset', 'islands#greenClusterIcons')`.

Еще есть файл `./popup.js`, он лишний мы и так показываем попап для метки. 